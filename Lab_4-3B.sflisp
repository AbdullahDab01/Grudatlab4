
INPORT: 	EQU		$FC
OUTPORT:	EQU		$FB
INDEX:		EQU		$FE	

		ORG		$20

init:		LDSP		#$10
		CLRA
		STA		INDEX
		LDX		#STATE_VECTOR

Routine_1:	LDA		INPORT
		JSR		Delay
		
		LDA		INDEX
		LDA		A,X
		STA		OUTPORT
	
		JSR		NEXT_STATE
		JMP 		Routine_1


Delay:		DECA
		TSTA
		BHI		Delay
		RTS
		

NEXT_STATE:	LDA		INDEX
		INCA
		ANDA		#$03
		STA		INDEX
		RTS
		

		ORG		$70
STATE_VECTOR:	FCB		$05,$06,$0A,$09
